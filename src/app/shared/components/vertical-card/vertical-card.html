<div class="vertical-card rounded-xl bg-white" dir="rtl">
  <div class="image rounded-xl overflow-hidden h-[150px] w-full relative">
    @if (!isImageLoaded()) {
      <div class="absolute inset-0 z-10 w-full h-full bg-gray-300 animate-pulse"></div>
    }

    <img
      [src]="image()"
      [alt]="name()"
      (load)="onImageLoad()"
      class="object-cover w-full h-full transition-opacity duration-300"
      [class.opacity-0]="!isImageLoaded()"
      [class.opacity-100]="isImageLoaded()"
    />
    <div
      class="absolute top-[2px] right-[2px] bg-white rounded-tr-xl rounded-bl-xl flex items-center px-2 py-1 gap-1 border border-solid border-color-gold"
    >
      @if (destination() === 'agency' || destination() === 'university') {
        <tui-icon
          icon="@tui.star"
          class="text-color-gold text-[14px] transform -translate-y-[1.5px]"
        />
        <span class="text-color-gold text-xs">{{ rating() }}</span>
      } @else {
        <tui-icon
          icon="@tui.megaphone"
          class="text-color-gold text-[18px] transform -translate-y-[1.5px]"
        />
      }
    </div>
  </div>
  <div class="content mt-4 mb-4 flex flex-col gap-1 px-4">
    <h2 class="text-color-dark font-semibold text-base line-clamp-1">{{ name() }}</h2>
    <p class="text-color-gray text-sm mt-1 mb-1 line-clamp-2">{{ description() }}</p>
    <div class="h-[1px] bg-[#e9e9e9] w-3/4 mt-1"></div>
  </div>
  <div class="footer flex justify-between items-center pb-2 px-4">
    @if (destination() !== 'ad') {
      <span class="px-2 py-1 text-xs bg-color-orange text-white rounded-full">پیشنهاد ما</span>
    } @else {
      <span class="px-2 py-1 text-xs bg-color-orange text-white rounded-full">تبلیغات</span>
    }
    @if (destination() === 'agency') {
      <button
        class="bg-color-gold text-white p-1 rounded-full text-xs"
        [routerLink]="['/agency', id()]"
      >
        <tui-icon icon="@tui.eye" />
      </button>
    }
    @if (destination() === 'university') {
      <button
        class="bg-color-gold text-white p-1 rounded-full text-xs"
        [routerLink]="['/university', id()]"
      >
        <tui-icon icon="@tui.eye" />
      </button>
    }
    @if (destination() === 'ad') {
      <a
        class="bg-color-gold text-white p-1 rounded-full text-xs"
        [href]="targetUrl() || '#'"
        target="_blank"
      >
        <tui-icon icon="@tui.eye" />
      </a>
    }
  </div>
</div>
